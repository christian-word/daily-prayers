<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–ª–∏—Ç–æ–≤–Ω–∏–π —â–æ–¥–µ–Ω–Ω–∏–∫</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; }
        header { background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); text-align: center; }
        h1 { color: #667eea; font-size: 2.5em; margin-bottom: 10px; }
        .subtitle { color: #666; font-size: 1.1em; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .stat-card { background: rgba(255, 255, 255, 0.95); padding: 20px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); text-align: center; transition: transform 0.3s ease; }
        .stat-card:hover { transform: translateY(-5px); }
        .stat-number { font-size: 2.5em; font-weight: bold; color: #667eea; display: block; }
        .stat-label { color: #666; margin-top: 5px; font-size: 0.9em; }
        .main-content { display: grid; grid-template-columns: 300px 1fr; gap: 20px; margin-bottom: 20px; }
        .sidebar { background: rgba(255, 255, 255, 0.95); padding: 20px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); height: fit-content; }
        .add-btn { width: 100%; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-size: 1.1em; font-weight: bold; cursor: pointer; margin-bottom: 20px; transition: transform 0.2s; }
        .add-btn:hover { transform: scale(1.05); }
        .filters { margin-top: 20px; }
        .filter-group { margin-bottom: 15px; }
        .filter-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #667eea; }
        .filter-group select, .filter-group input { width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; }
        .category-filter { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .category-btn { padding: 8px 15px; border: 2px solid #e0e0e0; background: white; border-radius: 20px; cursor: pointer; transition: all 0.3s; font-size: 0.9em; }
        .category-btn.active { background: #667eea; color: white; border-color: #667eea; }
        .prayers-container { background: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .prayers-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .prayers-header h2 { color: #667eea; }
        .prayers-list { display: grid; gap: 15px; }
        .prayer-card { background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 20px; transition: all 0.3s; }
        .prayer-card:hover { box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3); border-color: #667eea; }
        .prayer-card.answered { border-left: 5px solid #4caf50; background: #f1f8f4; }
        .prayer-card.active { border-left: 5px solid #2196f3; }
        .prayer-card.waiting { border-left: 5px solid #ff9800; }
        .prayer-card.longterm { border-left: 5px solid #9c27b0; }
        .prayer-title { font-size: 1.3em; font-weight: bold; color: #333; margin-bottom: 10px; }
        .prayer-category { display: inline-block; padding: 4px 12px; background: #e3f2fd; color: #1976d2; border-radius: 15px; font-size: 0.85em; margin-bottom: 10px; }
        .prayer-description { color: #666; line-height: 1.6; margin-bottom: 15px; }
        .prayer-meta { display: flex; gap: 15px; font-size: 0.9em; color: #999; margin-bottom: 15px; }
        .prayer-actions { display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap; }
        .btn { padding: 8px 15px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9em; transition: all 0.3s; }
        .btn-answer { background: #4caf50; color: white; }
        .btn-note { background: #2196f3; color: white; }
        .btn-edit { background: #ff9800; color: white; }
        .btn-delete { background: #f44336; color: white; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: white; padding: 30px; border-radius: 15px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .modal-header h2 { color: #667eea; }
        .close-btn { font-size: 2em; cursor: pointer; color: #999; border: none; background: none; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #333; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; font-family: inherit; }
        .form-group textarea { min-height: 100px; resize: vertical; }
        .form-actions { display: flex; gap: 10px; justify-content: flex-end; }
        .btn-primary { background: #667eea; color: white; padding: 12px 30px; }
        .btn-secondary { background: #e0e0e0; color: #333; padding: 12px 30px; }
        .empty-state { text-align: center; padding: 60px 20px; color: #999; }
        .empty-state-icon { font-size: 4em; margin-bottom: 20px; }
        .answered-info { background: #e8f5e9; padding: 15px; border-radius: 10px; margin-top: 10px; border-left: 4px solid #4caf50; }
        @keyframes spin { to { transform: rotate(360deg); } }
        @media (max-width: 968px) { .main-content { grid-template-columns: 1fr; } h1 { font-size: 1.8em; } .stats-grid { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìñ –ú–æ–ª–∏—Ç–æ–≤–Ω–∏–π —â–æ–¥–µ–Ω–Ω–∏–∫</h1>
            <p class="subtitle">"–ë–µ–∑–ø–µ—Ä–µ—Å—Ç–∞–Ω–∫—É –º–æ–ª—ñ—Ç—å—Å—è" - 1 –°–æ–ª—É–Ω—è–Ω 5:17</p>
        </header>
        <div class="stats-grid">
            <div class="stat-card"><span class="stat-number" id="totalPrayers">0</span><div class="stat-label">–í—Å—å–æ–≥–æ –º–æ–ª–∏—Ç–æ–≤</div></div>
            <div class="stat-card"><span class="stat-number" id="activePrayers">0</span><div class="stat-label">–ê–∫—Ç–∏–≤–Ω–∏—Ö</div></div>
            <div class="stat-card"><span class="stat-number" id="answeredPrayers">0</span><div class="stat-label">–í—ñ–¥–ø–æ–≤—ñ–¥–µ–π –æ—Ç—Ä–∏–º–∞–Ω–æ</div></div>
            <div class="stat-card"><span class="stat-number" id="answerRate">0%</span><div class="stat-label">–í—ñ–¥—Å–æ—Ç–æ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π</div></div>
        </div>
        <div class="main-content">
            <aside class="sidebar">
                <button class="add-btn" onclick="app.openAddModal()">+ –ù–æ–≤–∞ –º–æ–ª–∏—Ç–≤–∞</button>
                <div class="filters">
                    <h3 style="color: #667eea; margin-bottom: 15px;">–§—ñ–ª—å—Ç—Ä–∏</h3>
                    <div class="filter-group"><label>–ü–æ—à—É–∫</label><input type="text" id="searchInput" placeholder="–ü–æ—à—É–∫..." oninput="app.filterPrayers()"></div>
                    <div class="filter-group"><label>–°—Ç–∞—Ç—É—Å</label><select id="statusFilter" onchange="app.filterPrayers()"><option value="all">–£—Å—ñ</option><option value="active">–ê–∫—Ç–∏–≤–Ω—ñ</option><option value="answered">–ó –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é</option><option value="waiting">–û—á—ñ–∫—É–≤–∞–Ω–Ω—è</option><option value="longterm">–î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ</option></select></div>
                    <div class="filter-group"><label>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label><div class="category-filter"><button class="category-btn active" onclick="app.filterByCategory('all')">–£—Å—ñ</button><button class="category-btn" onclick="app.filterByCategory('family')">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</button><button class="category-btn" onclick="app.filterByCategory('health')">üíä</button><button class="category-btn" onclick="app.filterByCategory('work')">üíº</button><button class="category-btn" onclick="app.filterByCategory('finance')">üí∞</button><button class="category-btn" onclick="app.filterByCategory('church')">‚õ™</button><button class="category-btn" onclick="app.filterByCategory('personal')">üéØ</button></div></div>
                </div>
                <div style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
                    <button class="btn btn-primary" style="width: 100%; margin-bottom: 10px;" onclick="app.exportData()">üì• –ï–∫—Å–ø–æ—Ä—Ç</button>
                    <button class="btn btn-secondary" style="width: 100%;" onclick="app.openHelp()">‚ùì –î–æ–≤—ñ–¥–∫–∞</button>
                </div>
            </aside>
            <main class="prayers-container">
                <div class="prayers-header"><h2>–ú–æ—ó –º–æ–ª–∏—Ç–≤–∏</h2></div>
                <div class="prayers-list" id="prayersList"><div class="empty-state"><div class="empty-state-icon">üôè</div><h3>–ü–æ—á–Ω—ñ—Ç—å –≤–µ—Å—Ç–∏ –º–æ–ª–∏—Ç–æ–≤–Ω–∏–π —â–æ–¥–µ–Ω–Ω–∏–∫</h3><p>–î–æ–¥–∞–π—Ç–µ –ø–µ—Ä—à—É –º–æ–ª–∏—Ç–≤—É!</p></div></div>
            </main>
        </div>
    </div>

    <div class="modal" id="prayerModal">
        <div class="modal-content">
            <div class="modal-header"><h2 id="modalTitle">–ù–æ–≤–∞ –º–æ–ª–∏—Ç–≤–∞</h2><button class="close-btn" onclick="app.closeModal()">&times;</button></div>
            <form id="prayerForm" onsubmit="app.savePrayer(event)">
                <input type="hidden" id="prayerId">
                <div class="form-group"><label>–ó–∞ –∫–æ–≥–æ/—â–æ –º–æ–ª–∏—Ç–µ—Å—è? *</label><input type="text" id="prayerTitle" required></div>
                <div class="form-group"><label>–û–ø–∏—Å</label><textarea id="prayerDescription"></textarea></div>
                <div class="form-group"><label>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label><select id="prayerCategory"><option value="family">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°—ñ–º'—è</option><option value="health">üíä –ó–¥–æ—Ä–æ–≤'—è</option><option value="work">üíº –†–æ–±–æ—Ç–∞</option><option value="finance">üí∞ –§—ñ–Ω–∞–Ω—Å–∏</option><option value="church">‚õ™ –¶–µ—Ä–∫–≤–∞</option><option value="personal">üéØ –û—Å–æ–±–∏—Å—Ç–µ</option></select></div>
                <div class="form-group"><label>–°—Ç–∞—Ç—É—Å</label><select id="prayerStatus"><option value="active">üôè –ê–∫—Ç–∏–≤–Ω–∞</option><option value="waiting">‚è≥ –û—á—ñ–∫—É–≤–∞–Ω–Ω—è</option><option value="longterm">üìå –î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∞</option></select></div>
                <div class="form-actions"><button type="button" class="btn btn-secondary" onclick="app.closeModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button><button type="submit" class="btn btn-primary">–ó–±–µ—Ä–µ–≥—Ç–∏</button></div>
            </form>
        </div>
    </div>

    <div class="modal" id="aiModal">
        <div class="modal-content">
            <div class="modal-header"><h2>ü§ñ –®–Ü-–ø–æ–º—ñ—á–Ω–∏–∫</h2><button class="close-btn" onclick="app.closeAIModal()">&times;</button></div>
            <div style="margin-bottom: 20px;">
                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;"><strong id="aiPrayerTitle"></strong><p id="aiPrayerDesc" style="color: #666; margin-top: 5px;"></p></div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px;">
                    <button class="btn btn-primary" onclick="app.getAIResponse('verses')" style="padding: 15px;">üìñ –ó–Ω–∞–π—Ç–∏ –≤—ñ—Ä—à—ñ</button>
                    <button class="btn btn-primary" onclick="app.getAIResponse('encourage')" style="padding: 15px;">üí™ –ü—ñ–¥–±–∞–¥—å–æ—Ä–µ–Ω–Ω—è</button>
                    <button class="btn btn-primary" onclick="app.getAIResponse('advice')" style="padding: 15px;">üí° –ü–æ—Ä–∞–¥–∏</button>
                </div>
                <div id="aiResponse" style="display: none;"><div style="background: linear-gradient(135deg, #667eea22 0%, #764ba233 100%); padding: 20px; border-radius: 12px; border-left: 5px solid #667eea;"><div id="aiResponseText" style="line-height: 1.8; white-space: pre-wrap;"></div></div></div>
                <div id="aiLoading" style="display: none; text-align: center; padding: 40px;"><div style="display: inline-block; width: 40px; height: 40px; border: 4px solid #e0e0e0; border-top-color: #667eea; border-radius: 50%; animation: spin 1s linear infinite;"></div><p style="margin-top: 15px; color: #666;">–î—É–º–∞—é...</p></div>
            </div>
            <div style="text-align: center;"><button class="btn btn-secondary" onclick="app.closeAIModal()">–ó–∞–∫—Ä–∏—Ç–∏</button></div>
        </div>
    </div>

    <div class="modal" id="helpModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header"><h2>‚ùì –î–æ–≤—ñ–¥–∫–∞</h2><button class="close-btn" onclick="app.closeHelp()">&times;</button></div>
            <div style="line-height: 1.8; color: #333;">
                <div style="background: linear-gradient(135deg, #667eea22 0%, #764ba233 100%); padding: 20px; border-radius: 12px; margin-bottom: 25px; border-left: 5px solid #667eea;"><h3 style="color: #667eea; margin-bottom: 10px;">üôè –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ!</h3><p style="margin: 0;">–ú–æ–ª–∏—Ç–æ–≤–Ω–∏–π —â–æ–¥–µ–Ω–Ω–∏–∫ - —Ü–µ –≤–∞—à –æ—Å–æ–±–∏—Å—Ç–∏–π –ø—Ä–æ—Å—Ç—ñ—Ä –¥–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –ë–æ–≥–æ–º. –¢—É—Ç –≤–∏ –º–æ–∂–µ—Ç–µ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ —Å–≤–æ—ó –º–æ–ª–∏—Ç–≤–∏, –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —ñ –±–∞—á–∏—Ç–∏, —è–∫ –ì–æ—Å–ø–æ–¥—å –¥—ñ—î —É –≤–∞—à–æ–º—É –∂–∏—Ç—Ç—ñ.</p></div>
                <div style="margin-bottom: 25px;"><h3 style="color: #667eea; margin-bottom: 15px;">ü§ñ –®–Ü-–ø–æ–º—ñ—á–Ω–∏–∫</h3><div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;"><h4 style="color: #2196f3; margin-bottom: 8px;">üìñ –ó–Ω–∞–π—Ç–∏ –≤—ñ—Ä—à—ñ</h4><p style="margin: 0;">–®–Ü –ø—ñ–¥–±–µ—Ä–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ –±—ñ–±–ª—ñ–π–Ω—ñ –≤—ñ—Ä—à—ñ –¥–ª—è –≤–∞—à–æ—ó –º–æ–ª–∏—Ç–≤–∏.</p></div><div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;"><h4 style="color: #4caf50; margin-bottom: 8px;">üí™ –ü—ñ–¥–±–∞–¥—å–æ—Ä–µ–Ω–Ω—è</h4><p style="margin: 0;">–û—Ç—Ä–∏–º–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–µ –ø—ñ–¥–±–∞–¥—å–æ—Ä—é—é—á–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, –∑–∞—Å–Ω–æ–≤–∞–Ω–µ –Ω–∞ –±—ñ–±–ª—ñ–π–Ω–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö.</p></div><div style="background: #f8f9fa; padding: 15px; border-radius: 10px;"><h4 style="color: #ff9800; margin-bottom: 8px;">üí° –ü–æ—Ä–∞–¥–∏</h4><p style="margin: 0;">–®–Ü –ø—ñ–¥–∫–∞–∂–µ, –ø—Ä–æ —â–æ —â–µ –º–æ–ª–∏—Ç–∏—Å—è —ñ —è–∫—ñ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ –∫—Ä–æ–∫–∏ –∑—Ä–æ–±–∏—Ç–∏.</p></div></div>
                <div style="background: linear-gradient(135deg, #667eea22 0%, #764ba233 100%); padding: 20px; border-radius: 12px; border-left: 5px solid #667eea;"><h3 style="color: #667eea; margin-bottom: 15px;">üìñ –î–ª—è –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è</h3><p style="font-style: italic; margin-bottom: 10px;">"–ü—Ä–æ—Å—ñ—Ç—å, —ñ –¥–∞—Å—Ç—å—Å—è –≤–∞–º; —à—É–∫–∞–π—Ç–µ, —ñ –∑–Ω–∞–π–¥–µ—Ç–µ; —Å—Ç—É–∫–∞–π—Ç–µ, —ñ –≤—ñ–¥—á–∏–Ω—è—Ç—å –≤–∞–º"</p><p style="text-align: right; color: #667eea; font-weight: bold;">- –ú–∞—Ç–≤—ñ–π 7:7</p></div>
            </div>
            <div style="text-align: center; margin-top: 25px;"><button class="btn btn-primary" onclick="app.closeHelp()">–ó—Ä–æ–∑—É–º—ñ–ª–æ! üôè</button></div>
        </div>
    </div>

    <script>
        const app = {
            prayers: [], currentFilter: { status: 'all', category: 'all', search: '' }, editingId: null, currentAIPrayer: null,
            API_KEY: atob("Z3NrX1NUelQyS1FFQko3MGNDb1hDSllaV0dkeWIzRlk5OHJHN2xvWXUxSmc1SnV0VFZOSzIyVHY="),
            API_URL: "https://api.groq.com/openai/v1/chat/completions",
            MODEL_NAME: "meta-llama/llama-4-maverick-17b-128e-instruct",
            categories: { family: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°—ñ–º\'—è', health: 'üíä –ó–¥–æ—Ä–æ–≤\'—è', work: 'üíº –†–æ–±–æ—Ç–∞', finance: 'üí∞ –§—ñ–Ω–∞–Ω—Å–∏', church: '‚õ™ –¶–µ—Ä–∫–≤–∞', personal: 'üéØ –û—Å–æ–±–∏—Å—Ç–µ' },
            statuses: { active: 'üôè –ê–∫—Ç–∏–≤–Ω–∞', answered: '‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—å', waiting: '‚è≥ –û—á—ñ–∫—É–≤–∞–Ω–Ω—è', longterm: 'üìå –î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∞' },
            init() { this.loadPrayers(); this.updateStats(); this.renderPrayers(); },
            loadPrayers() { const saved = localStorage.getItem('prayers'); if (saved) { this.prayers = JSON.parse(saved); } else { this.prayers = [{ id: Date.now(), title: "–ó–¥–æ—Ä–æ–≤'—è –º–∞–º–∏", description: "–ü—Ä–æ—à—É –ì–æ—Å–ø–æ–¥–∞ –ø—Ä–æ –∑—Ü—ñ–ª–µ–Ω–Ω—è", category: "health", status: "active", startDate: new Date().toISOString(), answerDate: null, answerNote: "" }]; this.savePrayersToStorage(); } },
            savePrayersToStorage() { localStorage.setItem('prayers', JSON.stringify(this.prayers)); this.updateStats(); this.renderPrayers(); },
            updateStats() { const total = this.prayers.length; const active = this.prayers.filter(p => p.status !== 'answered').length; const answered = this.prayers.filter(p => p.status === 'answered').length; const rate = total > 0 ? Math.round((answered / total) * 100) : 0; document.getElementById('totalPrayers').textContent = total; document.getElementById('activePrayers').textContent = active; document.getElementById('answeredPrayers').textContent = answered; document.getElementById('answerRate').textContent = rate + '%'; },
            renderPrayers() { const container = document.getElementById('prayersList'); const filtered = this.getFilteredPrayers(); if (filtered.length === 0) { container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üôè</div><h3>–ù–µ–º–∞—î –º–æ–ª–∏—Ç–æ–≤</h3><p>–î–æ–¥–∞–π—Ç–µ –Ω–æ–≤—É –º–æ–ª–∏—Ç–≤—É</p></div>'; return; } container.innerHTML = filtered.map(prayer => { const days = Math.floor((Date.now() - new Date(prayer.startDate)) / 86400000); return `<div class="prayer-card ${prayer.status}"><div class="prayer-title">${prayer.title}</div><span class="prayer-category">${this.categories[prayer.category]}</span>${prayer.description ? `<div class="prayer-description">${prayer.description}</div>` : ''}<div class="prayer-meta"><span>${this.statuses[prayer.status]}</span><span>üìÖ ${days} –¥–Ω—ñ–≤ —Ç–æ–º—É</span></div>${prayer.status === 'answered' && prayer.answerNote ? `<div class="answered-info"><strong>–í—ñ–¥–ø–æ–≤—ñ–¥—å –æ—Ç—Ä–∏–º–∞–Ω–æ! ‚ú®</strong><p>${prayer.answerNote}</p></div>` : ''}<div class="prayer-actions">${prayer.status !== 'answered' ? `<button class="btn btn-answer" onclick="app.markAnswered(${prayer.id})">‚ú® –í—ñ–¥–ø–æ–≤—ñ–¥—å</button>` : ''}<button class="btn btn-note" onclick="app.openAIHelper(${prayer.id})">ü§ñ –ü–æ–º—ñ—á–Ω–∏–∫</button><button class="btn btn-edit" onclick="app.editPrayer(${prayer.id})">‚úèÔ∏è</button><button class="btn btn-delete" onclick="app.deletePrayer(${prayer.id})">üóëÔ∏è</button></div></div>`; }).join(''); },
            getFilteredPrayers() { return this.prayers.filter(p => { const statusMatch = this.currentFilter.status === 'all' || p.status === this.currentFilter.status; const categoryMatch = this.currentFilter.category === 'all' || p.category === this.currentFilter.category; const searchMatch = !this.currentFilter.search || p.title.toLowerCase().includes(this.currentFilter.search.toLowerCase()) || (p.description && p.description.toLowerCase().includes(this.currentFilter.search.toLowerCase())); return statusMatch && categoryMatch && searchMatch; }); },
            filterPrayers() { this.currentFilter.status = document.getElementById('statusFilter').value; this.currentFilter.search = document.getElementById('searchInput').value; this.renderPrayers(); },
            filterByCategory(category) { this.currentFilter.category = category; document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active')); event.target.classList.add('active'); this.renderPrayers(); },
            openAddModal() { this.editingId = null; document.getElementById('modalTitle').textContent = '–ù–æ–≤–∞ –º–æ–ª–∏—Ç–≤–∞'; document.getElementById('prayerForm').reset(); document.getElementById('prayerModal').classList.add('active'); },
            closeModal() { document.getElementById('prayerModal').classList.remove('active'); },
            openHelp() { document.getElementById('helpModal').classList.add('active'); },
            closeHelp() { document.getElementById('helpModal').classList.remove('active'); },
            savePrayer(e) { e.preventDefault(); const prayer = { id: this.editingId || Date.now(), title: document.getElementById('prayerTitle').value, description: document.getElementById('prayerDescription').value, category: document.getElementById('prayerCategory').value, status: document.getElementById('prayerStatus').value, startDate: this.editingId ? this.prayers.find(p => p.id === this.editingId).startDate : new Date().toISOString(), answerDate: null, answerNote: '' }; if (this.editingId) { const index = this.prayers.findIndex(p => p.id === this.editingId); this.prayers[index] = prayer; } else { this.prayers.unshift(prayer); } this.savePrayersToStorage(); this.closeModal(); },
            editPrayer(id) { const prayer = this.prayers.find(p => p.id === id); if (!prayer) return; this.editingId = id; document.getElementById('modalTitle').textContent = '–†–µ–¥–∞–≥—É–≤–∞—Ç–∏'; document.getElementById('prayerTitle').value = prayer.title; document.getElementById('prayerDescription').value = prayer.description; document.getElementById('prayerCategory').value = prayer.category; document.getElementById('prayerStatus').value = prayer.status; document.getElementById('prayerModal').classList.add('active'); },
            deletePrayer(id) { if (!confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —Ü—é –º–æ–ª–∏—Ç–≤—É?')) return; this.prayers = this.prayers.filter(p => p.id !== id); this.savePrayersToStorage(); },
            markAnswered(id) { const answer = prompt('–Ø–∫ –ë–æ–≥ –≤—ñ–¥–ø–æ–≤—ñ–≤ –Ω–∞ –º–æ–ª–∏—Ç–≤—É?'); if (!answer) return; const prayer = this.prayers.find(p => p.id === id); if (prayer) { prayer.status = 'answered'; prayer.answerDate = new Date().toISOString(); prayer.answerNote = answer; this.savePrayersToStorage(); } },
            exportData() { const dataStr = JSON.stringify(this.prayers, null, 2); const blob = new Blob([dataStr], { type: 'application/json' }); const url = URL.createObjectURL(blob); const link = document.createElement('a'); link.href = url; link.download = `prayers_${new Date().toISOString().split('T')[0]}.json`; link.click(); URL.revokeObjectURL(url); },
            openAIHelper(id) { const prayer = this.prayers.find(p => p.id === id); if (!prayer) return; this.currentAIPrayer = prayer; document.getElementById('aiPrayerTitle').textContent = prayer.title; document.getElementById('aiPrayerDesc').textContent = prayer.description || ''; document.getElementById('aiResponse').style.display = 'none'; document.getElementById('aiModal').classList.add('active'); },
            closeAIModal() { document.getElementById('aiModal').classList.remove('active'); this.currentAIPrayer = null; },
            async getAIResponse(type) { if (!this.currentAIPrayer) return; const prayer = this.currentAIPrayer; const days = Math.floor((Date.now() - new Date(prayer.startDate)) / 86400000); document.getElementById('aiResponse').style.display = 'none'; document.getElementById('aiLoading').style.display = 'block'; const prompts = { verses: `–¢–∏ - –±—ñ–±–ª—ñ–π–Ω–∏–π –ø–æ–º—ñ—á–Ω–∏–∫. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–ª–∏—Ç—å—Å—è –ø—Ä–æ: "${prayer.title}". ${prayer.description ? `–û–ø–∏—Å: "${prayer.description}".` : ''}\n\n–ü—ñ–¥–±–µ—Ä–∏ 2-3 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ –±—ñ–±–ª—ñ–π–Ω—ñ –≤—ñ—Ä—à—ñ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é (–ø–µ—Ä–µ–∫–ª–∞–¥ –û–≥—ñ—î–Ω–∫–∞ –∞–±–æ —Å—É—á–∞—Å–Ω–∏–π). –§–æ—Ä–º–∞—Ç:\nüìñ [–ö–Ω–∏–≥–∞ —Ä–æ–∑–¥—ñ–ª:–≤—ñ—Ä—à]\n"–¢–µ–∫—Å—Ç –≤—ñ—Ä—à–∞"\n\n–ë—É–¥—å —Å—Ç–∏—Å–ª–∏–º —ñ —Ç–æ—á–Ω–∏–º.`, encourage: `–¢–∏ - —Ö—Ä–∏—Å—Ç–∏—è–Ω—Å—å–∫–∏–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫. –õ—é–¥–∏–Ω–∞ –º–æ–ª–∏—Ç—å—Å—è ${days} –¥–Ω—ñ–≤ –ø—Ä–æ: "${prayer.title}". ${prayer.description ? `–û–ø–∏—Å: "${prayer.description}".` : ''}\n\n–ù–∞–ø–∏—à–∏ –∫–æ—Ä–æ—Ç–∫–µ (3-4 —Ä–µ—á–µ–Ω–Ω—è) –ø—ñ–¥–±–∞–¥—å–æ—Ä—é—é—á–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é –Ω–∞ –æ—Å–Ω–æ–≤—ñ –±—ñ–±–ª—ñ–π–Ω–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤. –ü—ñ–¥–∫—Ä–µ—Å–ª–∏ –≤—ñ—Ä–Ω—ñ—Å—Ç—å –ë–æ–≥–∞ —ñ –≤–∞–∂–ª–∏–≤—ñ—Å—Ç—å –ø–æ—Å—Ç—ñ–π–Ω–æ—Å—Ç—ñ –≤ –º–æ–ª–∏—Ç–≤—ñ. –ë—É–¥—å —Ç–∞–∫—Ç–æ–≤–Ω–∏–º —ñ —Ç–µ–ø–ª–∏–º.`,                     advice: `–¢–∏ - –º—É–¥—Ä–∏–π —Ö—Ä–∏—Å—Ç–∏—è–Ω—Å—å–∫–∏–π —Ä–∞–¥–Ω–∏–∫. –õ—é–¥–∏–Ω–∞ –º–æ–ª–∏—Ç—å—Å—è –ø—Ä–æ: "${prayer.title}". ${prayer.description ? `–û–ø–∏—Å: "${prayer.description}".` : ''}\n\n–î–∞–π 2-3 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –ø–æ—Ä–∞–¥–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é:\n1. –ü—Ä–æ —â–æ —â–µ –º–æ–ª–∏—Ç–∏—Å—è –≤ —Ü—ñ–π —Å–∏—Ç—É–∞—Ü—ñ—ó\n2. –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –∫—Ä–æ–∫–∏ (—è–∫—ñ –¥–æ–ø–æ–≤–Ω—é—é—Ç—å –º–æ–ª–∏—Ç–≤—É)\n\n–ë—É–¥—å —Å—Ç–∏—Å–ª–∏–º, –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º —ñ –∫–æ—Ä–∏—Å–Ω–∏–º.` }; try { const response = await fetch(this.API_URL, { method: 'POST', headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${this.API_KEY}` }, body: JSON.stringify({ model: this.MODEL_NAME, messages: [{ role: 'system', content: '–¢–∏ - —Ç–∞–∫—Ç–æ–≤–Ω–∏–π —Ö—Ä–∏—Å—Ç–∏—è–Ω—Å—å–∫–∏–π –ø–æ–º—ñ—á–Ω–∏–∫ –¥–ª—è –º–æ–ª–∏—Ç–æ–≤–Ω–æ–≥–æ —â–æ–¥–µ–Ω–Ω–∏–∫–∞. –¢–∏ –ø–æ–≤–∞–∂–Ω–∏–π, –ø—ñ–¥–±–∞–¥—å–æ—Ä—é—é—á–∏–π —ñ –∑–∞—Å–Ω–æ–≤–∞–Ω–∏–π –Ω–∞ –ë—ñ–±–ª—ñ—ó. –ù–µ –¥–∞—î—à –±–æ–≥–æ—Å–ª–æ–≤—Å—å–∫–∏—Ö –ø–æ—Ä–∞–¥, –Ω–µ –ø–µ—Ä–µ–¥–±–∞—á–∞—î—à –≤–æ–ª—ñ –ë–æ–≥–∞, –Ω–µ –∑–∞–º—ñ–Ω—è—î—à –ø–∞—Å—Ç–æ—Ä–∞. –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –¢–Ü–õ–¨–ö–ò —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é.' }, { role: 'user', content: prompts[type] }], max_tokens: 500, temperature: 0.7 }) }); if (!response.ok) throw new Error(`API error: ${response.status}`); const data = await response.json(); const aiText = data.choices[0].message.content; document.getElementById('aiLoading').style.display = 'none'; document.getElementById('aiResponse').style.display = 'block'; document.getElementById('aiResponseText').textContent = aiText; } catch (error) { console.error('AI Error:', error); document.getElementById('aiLoading').style.display = 'none'; document.getElementById('aiResponse').style.display = 'block'; document.getElementById('aiResponseText').textContent = '‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.'; } }
        };
        window.addEventListener('DOMContentLoaded', () => app.init());
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { app.closeModal(); app.closeHelp(); app.closeAIModal(); } });
        document.getElementById('prayerModal').addEventListener('click', (e) => { if (e.target.id === 'prayerModal') app.closeModal(); });
        document.getElementById('helpModal').addEventListener('click', (e) => { if (e.target.id === 'helpModal') app.closeHelp(); });
        document.getElementById('aiModal').addEventListener('click', (e) => { if (e.target.id === 'aiModal') app.closeAIModal(); });
    </script>
</body>
</html>